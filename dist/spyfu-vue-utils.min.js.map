{"version":3,"file":"spyfu-vue-utils.min.js","sources":["../src/bind_external_event.js","../src/component_timeout.js","../src/component_ease.js","../src/component_interval.js","../src/plugin.js","../src/functional_component.js"],"sourcesContent":["/**\n * Bind an event to an element outside the scope of a Vue component.\n *\n * @param {Vue}         vm          vue component managing the event\n * @param {HTMLElement} targetEl    html element to bind an event listener to\n * @param {...any}      args        all other event arguments \n */\nexport default function bindExternalEvent(vm, targetEl, ...args) {\n    targetEl.addEventListener(...args);\n\n    const unbind = () => {\n        targetEl.removeEventListener(...args);\n    }\n\n    vm.$on('hook:destroyed', unbind);\n\n    return {\n        unbind,\n    };\n}\n","let timeouts = [];\n\n/**\n * Bind setTimeout() call to a component.\n *\n * @param {Vue}         vm          component managing the timeout\n * @param {Function}    callback    function to execute\n * @param {Number}      md          timeout duration in milliseconds\n */\nexport default function componentTimeout(vm, callback, ms) {\n    // track which timeouts are bound to our component, and when that\n    // it is destroyed make sure to cancel any lingering timeouts\n    let componentTimeouts = timeouts.find(obj => obj.vm === vm);\n\n    if (!componentTimeouts) {\n        componentTimeouts = { vm, timeouts: [] };\n\n        timeouts.push(componentTimeouts);\n\n        vm.$once('hook:destroyed', () => {\n            componentTimeouts.timeouts.forEach(clearTimeout);\n            timeouts = timeouts.filter(obj => obj.vm !== vm);\n        });\n    }\n\n    // once a timeout has been executed or canceled, remove it\n    // from our componentTimeouts that need to be cleaned up\n    function removeTimeoutById(timeoutId) {\n        if (componentTimeouts) {\n            const index = componentTimeouts.timeouts.findIndex(pendingId => pendingId === timeoutId);\n\n            if (index > -1) {\n                componentTimeouts.timeouts.splice(index, 1);\n            }\n        }\n    }\n\n    // queue the timeout, and keep track of it so it can be cleaned up\n    // if the component is destroyed before this timeout is executed.\n    const id = setTimeout(() => {\n        callback();\n        removeTimeoutById(id);\n    }, ms);\n\n    componentTimeouts.timeouts.push(id);\n\n    // return a function to manually cancel up a timeout\n    return {\n        cancel: () => {\n            clearTimeout(id);\n            removeTimeoutById(id);\n        },\n    };\n}","import componentTimeout from './component_timeout';\nimport bezierEasing from 'bezier-easing';\n\n/**\n * Create a component bound easing timeout.\n * \n * @param  {Vue}            vm\n * @param  {Function}       fn\n * @param  {number}         ms\n * @param  {Array<number>}  curve\n * @param  {number}         steps\n * @return {Function}\n */\nexport default function componentEase(vm, fn, ms, curve = [0.77, 0, 0.175, 1], steps = 0) {\n    // calculate the easing curve, and create an array\n    // to hold all of the timeouts we're about make\n    const easing = bezierEasing(...curve);\n    const frames = steps > 0 ? steps : 60 * (ms / 1000);\n    const timeouts = [];\n\n    // queue up each frame of the animation\n    for (let i = 0, end = frames - 1; i <= end; i += 1) {\n        const frame = i / end;\n\n        timeouts.push(\n            componentTimeout(vm, () => fn(+easing(frame).toFixed(4), i), frame * ms)\n        );\n    }\n\n    // and finally, return an object we can use to cancel the timeouts\n    return {\n        cancel: () => timeouts.forEach(timeout => timeout.cancel()),\n    };\n}","/**\n * Create an interval that is cleaned up when the component is destroyed.\n * \n * @param  {Vue}        vm\n * @param  {Function}   callback\n * @param  {Number}     ms\n * @return {Function}\n */\nexport default function componentInterval(vm, callback, ms) {\n    const interval = setInterval(callback, ms);\n\n    const cancel = () => clearInterval(interval);\n    \n    vm.$once('hook:destroyed', cancel);\n\n    return { cancel };\n}\n","import bindExternalEvent from './bind_external_event';\nimport componentEase from './component_ease';\nimport componentInterval from './component_interval';\nimport componentTimeout from './component_timeout';\n\nexport default {\n    install(Vue) {\n        Vue.prototype.$bindExternalEvent = function(...args) {\n            return bindExternalEvent(this, ...args);\n        }\n\n        Vue.prototype.$ease = function(...args) {\n            return componentEase(this, ...args);\n        }\n\n        Vue.prototype.$interval = function(...args) {\n            return componentInterval(this, ...args);\n        }\n\n        Vue.prototype.$timeout = function(...args) {\n            return componentTimeout(this, ...args);\n        }\n    },\n};\n","/**\n * Wrap a render function as a functional component.\n *\n * @param  {Function<h>}    render\n * @return {Object}\n */\nexport default function functionalComponent(render) {\n    return {\n        functional: true,\n        render: render,\n    };\n}\n"],"names":["bindExternalEvent","vm","targetEl","args","addEventListener","unbind","removeEventListener","$on","timeouts","componentTimeout","callback","ms","componentTimeouts","find","obj","removeTimeoutById","timeoutId","index","findIndex","pendingId","splice","push","$once","forEach","clearTimeout","filter","id","setTimeout","cancel","componentEase","fn","curve","steps","easing","bezierEasing","i","end","frame","toFixed","timeout","componentInterval","clearInterval","interval","setInterval","install","Vue","prototype","$bindExternalEvent","this","$ease","$interval","$timeout","render","functional"],"mappings":"6QAOe,SAASA,EAAkBC,EAAIC,8BAAaC,mCAAAA,oBACvDD,EAASE,uBAATF,EAA6BC,GAEd,SAATE,IACFH,EAASI,0BAATJ,EAAgCC,UAGpCF,EAAGM,IAAI,iBAAkBF,GAElB,CACHA,OAAAA,qYCjBR,IAAIG,EAAW,GASA,SAASC,EAAiBR,EAAIS,EAAUC,OAG/CC,EAAoBJ,EAASK,KAAK,SAAAC,UAAOA,EAAIb,KAAOA,aAe/Cc,EAAkBC,MACnBJ,EAAmB,KACbK,EAAQL,EAAkBJ,SAASU,UAAU,SAAAC,UAAaA,IAAcH,KAEjE,EAATC,GACAL,EAAkBJ,SAASY,OAAOH,EAAO,IAlBhDL,IACDA,EAAoB,CAAEX,GAAAA,EAAIO,SAAU,IAEpCA,EAASa,KAAKT,GAEdX,EAAGqB,MAAM,iBAAkB,WACvBV,EAAkBJ,SAASe,QAAQC,cACnChB,EAAWA,EAASiB,OAAO,SAAAX,UAAOA,EAAIb,KAAOA,WAkB/CyB,EAAKC,WAAW,WAClBjB,IACAK,EAAkBW,IACnBf,UAEHC,EAAkBJ,SAASa,KAAKK,GAGzB,CACHE,OAAQ,WACJJ,aAAaE,GACbX,EAAkBW,KCrCf,SAASG,EAAc5B,EAAI6B,EAAInB,WAAIoB,yDAAQ,CAAC,IAAM,EAAG,KAAO,GAAIC,yDAAQ,EAG7EC,EAASC,iBAAgBH,IAEzBvB,EAAW,cAGR2B,EAAOC,OACNC,EAAQF,EAAIC,EAElB5B,EAASa,KACLZ,EAAiBR,EAAI,kBAAM6B,GAAIG,EAAOI,GAAOC,QAAQ,GAAIH,IAAIE,EAAQ1B,KAJpEwB,EAAI,EAAGC,GAJO,EAARJ,EAAYA,EAAcrB,EAAK,IAAX,IAIJ,EAAGwB,GAAKC,EAAKD,GAAK,IAAxCA,EAAOC,SAST,CACHR,OAAQ,kBAAMpB,EAASe,QAAQ,SAAAgB,UAAWA,EAAQX,aCvB3C,SAASY,EAAkBvC,EAAIS,EAAUC,GAGrC,SAATiB,WAAea,cAAcC,OAF7BA,EAAWC,YAAYjC,EAAUC,UAIvCV,EAAGqB,MAAM,iBAAkBM,GAEpB,CAAEA,OAAAA,SCVE,CACXgB,iBAAQC,GACJA,EAAIC,UAAUC,mBAAqB,sCAAY5C,2BAAAA,yBACpCH,gBAAkBgD,aAAS7C,KAGtC0C,EAAIC,UAAUG,MAAQ,sCAAY9C,2BAAAA,yBACvB0B,gBAAcmB,aAAS7C,KAGlC0C,EAAIC,UAAUI,UAAY,sCAAY/C,2BAAAA,yBAC3BqC,gBAAkBQ,aAAS7C,KAGtC0C,EAAIC,UAAUK,SAAW,sCAAYhD,2BAAAA,yBAC1BM,gBAAiBuC,aAAS7C,kICd9B,SAA6BiD,SACjC,CACHC,YAAY,EACZD,OAAQA"}