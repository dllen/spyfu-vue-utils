{"version":3,"file":"spyfu-vue-utils.esm.js","sources":["../src/bind_external_event.js","../src/component_timeout.js"],"sourcesContent":["/**\n * Bind an event to an element outside the scope of a Vue component.\n *\n * @param {Vue}         vm          vue component managing the event\n * @param {HTMLElement} targetEl    html element to bind an event listener to\n * @param  {...any}     args        all other event arguments \n */\nexport default function bindExternalEvent(vm, targetEl, ...args) {\n    targetEl.addEventListener(...args);\n\n    vm.$on('hook:destroyed', () => {\n        targetEl.removeEventListener(...args);\n    });\n}\n","let timeouts = [];\n\n/**\n * Bind setTimeout() call to a component.\n *\n * @param {Vue}         vm          component managing the timeout\n * @param {Function}    callback    function to execute\n * @param {Number}      md          timeout duration in milliseconds\n */\nexport default function componentTimeout(vm, callback, ms) {\n    let componentTimeouts = timeouts.find(obj => obj.vm === vm);\n\n    if (!componentTimeouts) {\n        componentTimeouts = { vm, timeouts: [] };\n\n        timeouts.push(componentTimeouts);\n\n        vm.$once('hook:destroyed', () => {\n            componentTimeouts.timeouts.forEach(clearTimeout);\n            timeouts = timeouts.filter(obj => obj.vm !== vm);\n        });\n    }\n\n    const id = setTimeout(() => {\n        callback();\n\n        if (componentTimeouts) {\n            const index = componentTimeouts.timeouts.findIndex(pendingId => pendingId === id);\n\n            if (index > -1) {\n                componentTimeouts.timeouts.splice(index, 1);\n            }\n        }\n    }, ms);\n\n    componentTimeouts.timeouts.push(id);\n\n    return id;\n}"],"names":["bindExternalEvent","vm","targetEl","args","addEventListener","$on","removeEventListener","timeouts","componentTimeout","callback","ms","componentTimeouts","find","obj","push","$once","forEach","clearTimeout","filter","id","setTimeout","index","findIndex","pendingId","splice"],"mappings":"AAAA;;;;;;;AAOA,AAAe,SAASA,iBAAT,CAA2BC,EAA3B,EAA+BC,QAA/B,EAAkD;oCAANC,IAAM;IAANA,IAAM;;;EAC7DD,QAAQ,CAACE,gBAAT,OAAAF,QAAQ,EAAqBC,IAArB,CAAR;EAEAF,EAAE,CAACI,GAAH,CAAO,gBAAP,EAAyB,YAAM;IAC3BH,QAAQ,CAACI,mBAAT,OAAAJ,QAAQ,EAAwBC,IAAxB,CAAR;GADJ;;;ACVJ,IAAII,QAAQ,GAAG,EAAf;;;;;;;;;AASA,AAAe,SAASC,gBAAT,CAA0BP,EAA1B,EAA8BQ,QAA9B,EAAwCC,EAAxC,EAA4C;MACnDC,iBAAiB,GAAGJ,QAAQ,CAACK,IAAT,CAAc,UAAAC,GAAG;WAAIA,GAAG,CAACZ,EAAJ,KAAWA,EAAf;GAAjB,CAAxB;;MAEI,CAACU,iBAAL,EAAwB;IACpBA,iBAAiB,GAAG;MAAEV,EAAE,EAAFA,EAAF;MAAMM,QAAQ,EAAE;KAApC;IAEAA,QAAQ,CAACO,IAAT,CAAcH,iBAAd;IAEAV,EAAE,CAACc,KAAH,CAAS,gBAAT,EAA2B,YAAM;MAC7BJ,iBAAiB,CAACJ,QAAlB,CAA2BS,OAA3B,CAAmCC,YAAnC;MACAV,QAAQ,GAAGA,QAAQ,CAACW,MAAT,CAAgB,UAAAL,GAAG;eAAIA,GAAG,CAACZ,EAAJ,KAAWA,EAAf;OAAnB,CAAX;KAFJ;;;MAMEkB,EAAE,GAAGC,UAAU,CAAC,YAAM;IACxBX,QAAQ;;QAEJE,iBAAJ,EAAuB;UACbU,KAAK,GAAGV,iBAAiB,CAACJ,QAAlB,CAA2Be,SAA3B,CAAqC,UAAAC,SAAS;eAAIA,SAAS,KAAKJ,EAAlB;OAA9C,CAAd;;UAEIE,KAAK,GAAG,CAAC,CAAb,EAAgB;QACZV,iBAAiB,CAACJ,QAAlB,CAA2BiB,MAA3B,CAAkCH,KAAlC,EAAyC,CAAzC;;;GAPS,EAUlBX,EAVkB,CAArB;EAYAC,iBAAiB,CAACJ,QAAlB,CAA2BO,IAA3B,CAAgCK,EAAhC;SAEOA,EAAP;;;;;"}